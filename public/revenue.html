<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pendapatan - POS System</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="/css/style.css?v=2" />
  <link rel="icon" href="/favicon.ico" />
</head>
<body class="bg-light">
  <nav class="navbar navbar-expand-lg navbar-dark bg-success">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Pendapatan</a>
      <div class="d-flex align-items-center gap-2">
        <a href="/kasir" class="btn btn-outline-light btn-sm">Kembali ke Kasir</a>
        <a href="/admin" class="btn btn-outline-light btn-sm">Admin</a>
      </div>
    </div>
  </nav>

  <main class="container py-4">
    <div class="card mb-3">
      <div class="card-body">
        <div class="row g-3 align-items-end">
          <div class="col-12 col-md-3">
            <label class="form-label">Dari Tanggal</label>
            <input type="date" id="fromDate" class="form-control" />
          </div>
          <div class="col-12 col-md-3">
            <label class="form-label">Sampai Tanggal</label>
            <input type="date" id="toDate" class="form-control" />
          </div>
          <div class="col-12 col-md-3">
            <label class="form-label">Group</label>
            <select id="groupSelect" class="form-select">
              <option value="day">Harian</option>
              <option value="month">Bulanan</option>
              <option value="year">Tahunan</option>
            </select>
          </div>
          <div class="col-12 col-md-3">
            <label class="form-label">Pencarian</label>
            <input type="text" id="searchInput" class="form-control" placeholder="ID / Nama Pelanggan / Item" />
          </div>
          <div class="col-12 d-flex flex-wrap gap-2">
            <button id="presetToday" class="btn btn-outline-secondary btn-sm">Hari ini</button>
            <button id="presetThisMonth" class="btn btn-outline-secondary btn-sm">Bulan ini</button>
            <button id="presetThisYear" class="btn btn-outline-secondary btn-sm">Tahun ini</button>
            <button id="btnRefresh" class="btn btn-primary btn-sm">Terapkan Filter</button>
            <div class="ms-auto d-flex gap-2">
              <button id="btnExportXlsx" class="btn btn-success btn-sm">Export XLSX</button>
              <button id="btnExportPdf" class="btn btn-danger btn-sm">Export PDF</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row g-3">
      <div class="col-12 col-lg-4">
        <div class="card h-100">
          <div class="card-header">Ringkasan</div>
          <div class="card-body" id="summaryBox">
            <div class="text-muted">Memuat...</div>
          </div>
        </div>
      </div>
      <div class="col-12 col-lg-8">
        <div class="card h-100">
          <div class="card-header d-flex justify-content-between align-items-center">
            <span>Rekap Berdasarkan <span id="groupLabel">Harian</span></span>
          </div>
          <div class="table-responsive" style="max-height: 360px;">
            <table class="table table-sm table-striped align-middle mb-0" id="groupTable">
              <thead class="table-light">
                <tr>
                  <th>Periode</th>
                  <th class="text-end">Transaksi</th>
                  <th class="text-end">Subtotal</th>
                  <th class="text-end">Diskon</th>
                  <th class="text-end">HPP</th>
                  <th class="text-end">Laba</th>
                  <th class="text-end">Total</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <div class="card mt-3">
      <div class="card-header">Detail Transaksi</div>
      <div class="table-responsive">
        <table class="table table-sm table-striped align-middle mb-0" id="txTable">
          <thead class="table-light">
            <tr>
              <th>Tanggal</th>
              <th>ID</th>
              <th>Pelanggan</th>
              <th class="text-end">Item</th>
              <th class="text-end">Subtotal</th>
              <th class="text-end">Diskon</th>
              <th class="text-end">Laba</th>
              <th class="text-end">Total</th>
              <th>Metode</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Client-side SheetJS for XLSX export -->
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <!-- jsPDF and autoTable for PDF export -->
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf-autotable@3.8.2/dist/jspdf.plugin.autotable.min.js"></script>
  <script src="/js/revenue.js?v=1"></script>
</body>
</html>
