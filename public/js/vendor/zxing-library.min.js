/*! Minimal offline loader for @zxing/library UMD. This file first tries to load a local embedded UMD payload if present, otherwise falls back to well-known CDNs. */
(function(){
  // If already available, do nothing
  try {
    if (window.ZXing && window.ZXing.BrowserMultiFormatReader) { return; }
  } catch (e) {}

  // If an embedded payload section is present (optional), it will be appended below this line by tooling.
  // --- BEGIN OPTIONAL EMBEDDED UMD PAYLOAD ---
  // (none embedded)
  // --- END OPTIONAL EMBEDDED UMD PAYLOAD ---
  try {
    if (window.ZXing && window.ZXing.BrowserMultiFormatReader) { return; }
  } catch (e) {}

  var candidates = [
    'https://unpkg.com/@zxing/library@0.12.3/umd/index.min.js',
    'https://cdn.jsdelivr.net/npm/@zxing/library@0.12.3/umd/index.min.js',
    'https://unpkg.com/@zxing/library@latest/umd/index.min.js',
    'https://cdn.jsdelivr.net/npm/@zxing/library@latest/umd/index.min.js'
  ];

  function loadNext(i){
    if (i >= candidates.length) return;
    var url = candidates[i];
    var s = document.createElement('script');
    s.src = url;
    s.async = true;
    s.onload = function(){
      try {
        if (!(window.ZXing && window.ZXing.BrowserMultiFormatReader)) {
          loadNext(i+1);
        }
      } catch (e) { loadNext(i+1); }
    };
    s.onerror = function(){ loadNext(i+1); };
    document.head.appendChild(s);
  }

  loadNext(0);
})();
